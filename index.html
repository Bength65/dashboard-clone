<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bengt Crypto Dashboard</title>
  <link rel="stylesheet" href="styles.css" />
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
  <header class="dashboard-header">
  <h1>Bengt¬¥s Dashboard</h1>

  <div class="search-box">
    <input type="text" placeholder="Search" aria-label="Search" />
    <span class="search-icon">üîç</span>
  </div>


  <img src="bilder/bot.jpg" alt="Bot Avatar" class="avatar" />
</header>
  <div class="layout">
    <aside class="sidebar">
      <nav class="menu">
        <a href="#portfolio">Portfolio</a>
        <a href="#wallet">Wallet</a>
        <a href="#transactions">Transaktionshistorik</a>
        <a href="#create-transaction">Skapa transaktion</a>
        <a href="#chart">Chart</a>
        <a href="#">News</a>
        <a href="#">Settings</a>
        <a href="mailto:bength65@gmail.com" class="mail-link" aria-label="Skicka e-post">‚úâÔ∏è Mail</a>
        <button class="theme-toggle">Dark mode</button>
      </nav>
    </aside>
  
    <main class="main-content">
      <a name="portfolio"></a>
      <section class="portfolio" name="portfolio">
        <h2>My Portfolio</h2>
        <div class="coin-grid">
          <div class="coin-card"><img src="bilder/btc.svg" alt="BTC" /><h3>BTC</h3><p><span class="price">...</span><span class="change-icon">‚Üï</span><span class="change-24h">0%</span></p></div>      
          <div class="coin-card"><img src="bilder/eth.svg" alt="ETH" /><h3>ETH</h3><p><span class="price">...</span> <span class="change-icon">‚Üï</span><span class="change-24h">0%</span></p></div>
          <div class="coin-card"><img src="bilder/sol.svg" alt="SOL" /><h3>SOL</h3><p><span class="price">...</span> <span class="change-icon">‚Üï</span><span class="change-24h">0%</span></p></div>
          <div class="coin-card"><img src="bilder/ltc.svg" alt="LTC" /><h3>LTC</h3><p><span class="price">...</span> <span class="change-icon">‚Üï</span><span class="change-24h">0%</span></p></div>
          <div class="coin-card"><img src="bilder/xrp.svg" alt="XRP" class="coin-logo xrp-logo"/><h3>XRP</h3><p><span class="price">...</span> <span class="change-icon">‚Üï</span><span class="change-24h">0%</span></p></div>
          <div class="coin-card"><img src="bilder/ada.svg" alt="ADA" /><h3>ADA</h3><p><span class="price">...</span> <span class="change-icon">‚Üï</span><span class="change-24h">0%</span></p></div>
          <div class="coin-card"><img src="bilder/doge.svg" alt="DOGE" /><h3>DOGE</h3><p><span class="price">...</span> <span class="change-icon">‚Üï</span><span class="change-24h">0%</span></p></div>
          <div class="coin-card"><img src="bilder/bnb.svg" alt="BNB" /><h3>BNB</h3><p><span class="price">...</span> <span class="change-icon">‚Üï</span><span class="change-24h">0%</span></p></div>
          <div class="coin-card"><img src="bilder/dot.svg" alt="DOT" /><h3>DOT</h3><p><span class="price">...</span> <span class="change-icon">‚Üï</span><span class="change-24h">0%</span></p></div>
          <div class="coin-card"><img src="bilder/avax.svg" alt="AVAX" /><h3>AVAX</h3><p><span class="price">...</span> <span class="change-icon">‚Üï</span><span class="change-24h">0%</span></p></div>
        </div>
      </section>
      <a name="chart"></a>
      <section class="chart-section" name="chart">
        <h2>BTC/USDT</h2>
        <div class="chart"></div>
        <!-- Wallet -->
<a name="wallet"></a>
<section class="wallet" name="wallet">
  <h2>Wallet</h2>
  <div class="wallet-info">
    <img src="bilder/btc.svg" alt="BTC" class="wallet-icon" />
    <p>Aktuell balans: <h1><strong>$34,565.00</strong></h1></p>
    <p>Utveckling: +5.2%</p>
  </div>
</section>

<!-- Transaktionshistorik -->
<a name="transactions"></a>
<section class="transactions" name="transactions">
  <h2>Transaktionshistorik</h2>
  <table class="transaction-table">
    <thead>
      <tr>
        <th>Fr√•n</th>
        <th>Till</th>
        <th>Belopp</th>
        <th>Tid</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Bengt</td>
        <td>Alice</td>
        <td>0.25 BTC</td>
        <td>2025‚Äë11‚Äë14 10:32</td>
      </tr>
      <tr>
        <td>Bob</td>
        <td>Bengt</td>
        <td>1.00 ETH</td>
        <td>2025‚Äë11‚Äë13 18:45</td>
      </tr>
      <tr>
        <td>Bengt</td>
        <td>Charlie</td>
        <td>50 ADA</td>
        <td>2025‚Äë11‚Äë12 09:12</td>
      </tr>
    </tbody>
  </table>
</section>

<!-- Skapa transaktion -->
 <a name="create-transaction"></a>
<section class="create-transaction" name="create-transaction">
  <h2>Skapa transaktion</h2>
  <form>
    <label for="from">Fr√•n:</label>
    <input type="text" id="from" name="from" />

    <label for="to">Till:</label>
    <input type="text" id="to" name="to" />

    <label for="amount">Belopp:</label>
    <input type="number" id="amount" name="amount" step="0.01" />

    <label for="currency">Valuta:</label>
    <select id="currency" name="currency">
      <option>BTC</option>
      <option>ETH</option>
      <option>ADA</option>
      <option>XRP</option>
    </select>

    <div class="form-buttons">
      <button type="submit">Skicka</button>
      <button type="reset">Rensa</button>
    </div>
  </form>
</section>
      </section>
        <footer class="site-footer">
    <p>¬© 2025 Bengt Hafstr√∂m. All rights reserved.</p>
  </footer>

    </main>

    

  </div>

  <script>
    // Tema
    const toggle = document.querySelector(".theme-toggle");
    toggle.addEventListener("click", () => {
      const current = document.documentElement.dataset.theme;
      const next = current === "dark" ? "light" : "dark";
      document.documentElement.dataset.theme = next;
      drawChart();
    });
    document.documentElement.dataset.theme = "light";

    // Coins
    const coins = [
      { symbol: "BTCUSDT", name: "BTC" },
      { symbol: "ETHUSDT", name: "ETH" },
      { symbol: "SOLUSDT", name: "SOL" },
      { symbol: "LTCUSDT", name: "LTC" },
      { symbol: "XRPUSDT", name: "XRP" },
      { symbol: "ADAUSDT", name: "ADA" },
      { symbol: "DOGEUSDT", name: "DOGE" },
      { symbol: "BNBUSDT", name: "BNB" },
      { symbol: "DOTUSDT", name: "DOT" },
      { symbol: "AVAXUSDT", name: "AVAX" }
    ];

const previousPrices = {};

async function updatePrices() {
  for (const coin of coins) {
    try {
      const res = await fetch(`https://api.binance.com/api/v3/ticker/24hr?symbol=${coin.symbol}`);
      const data = await res.json();
      const price = parseFloat(data.lastPrice);
      const changePercent = parseFloat(data.priceChangePercent);

      const card = [...document.querySelectorAll(".coin-card")]
        .find(c => c.querySelector("h3").textContent === coin.name);

      if (card) {
        const priceEl = card.querySelector(".price");
        const icon = card.querySelector(".change-icon");
        const changeEl = card.querySelector(".change-24h");

        if (priceEl) priceEl.textContent = `$${price.toFixed(2)}`;
        if (changeEl) changeEl.textContent = `${changePercent.toFixed(2)}%`;

        // Pil‚Äëlogik
        if (previousPrices[coin.symbol] !== undefined && icon) {
          icon.classList.remove("up", "down");
          void icon.offsetWidth;

          if (price > previousPrices[coin.symbol]) {
            icon.textContent = "‚ñ≤";
            icon.classList.add("up");
          } else if (price < previousPrices[coin.symbol]) {
            icon.textContent = "‚ñº";
            icon.classList.add("down");
          } else {
            icon.textContent = "‚Üí";
          }
        }

        previousPrices[coin.symbol] = price;
      }
    } catch (err) {
      console.error(`Fel vid h√§mtning av ${coin.symbol}:`, err);
    }
  }
}

updatePrices();
setInterval(updatePrices, 10000);

    // Candlestick chart
    async function drawChart() {
      const res = await fetch("https://api.binance.com/api/v3/klines?symbol=BTCUSDT&interval=1m&limit=30");
      const raw = await res.json();
      const latestPrice = parseFloat(raw[raw.length - 1][4]).toFixed(2);

      const trace = {
        x: raw.map(d => new Date(d[0])),
        open: raw.map(d => parseFloat(d[1])),
        high: raw.map(d => parseFloat(d[2])),
        low: raw.map(d => parseFloat(d[3])),
        close: raw.map(d => parseFloat(d[4])),
        type: 'candlestick',
        increasing: { line: { color: 'green' } },
        decreasing: { line: { color: 'red' } }
      };

      const chartBg = getComputedStyle(document.body).getPropertyValue('--chart-bg').trim();
      const fgColor = getComputedStyle(document.body).getPropertyValue('--fg').trim();
      const borderColor = getComputedStyle(document.body).getPropertyValue('--border').trim();

      const layout = {
        xaxis: { rangeslider: { visible: false }, color: fgColor, gridcolor: borderColor },
        yaxis: { side: "right", dtick: 100, title: "USD", color: fgColor, gridcolor: borderColor },
        margin: { l: 40, r: 100, t: 40, b: 40 },
        paper_bgcolor: chartBg,
        plot_bgcolor: chartBg,
        annotations: [
          {
            xref: "paper", yref: "paper",
            x: 0.5, y: 1,
            text: `Current Price: $${latestPrice}`,
            showarrow: false,
            font: { size: 14, color: fgColor },
            align: "center",
            yanchor: "top",
            yshift: 10
          }
        ]
      };

      Plotly.react(document.querySelector(".chart"), [trace], layout, {responsive: true});
    }

    drawChart();
    setInterval(drawChart, 10000);
  </script>

</body>
</html>